require('dotenv').config();
const express = require('express');
const fs = require('fs');
const cors = require('cors');
const stripe = require('stripe')(process.env.STRIPE_SECRET_KEY);
const path = require('path');
const { GoogleSpreadsheet } = require('google-spreadsheet');
const { JWT } = require('google-auth-library');
const axios = require('axios');

const app = express();

app.use(cors());
app.use(express.json());

// Google Sheets konfigurÃ¡ciÃ³
const GOOGLE_SHEETS_CONFIG = {
  ORDERS_SHEET_ID: '1ysbyF0uCl1W03aGArpFYDIU6leFFRJb0R1AaadVarGk',
  CUSTOM_DESIGNS_SHEET_ID: '1MqSY872xDo7AGT5nyY2xfzOqTdr2SzCU4GUmDb6mOsA',
  SERVICE_ACCOUNT_EMAIL: process.env.GOOGLE_SERVICE_ACCOUNT_EMAIL,
  PRIVATE_KEY: process.env.GOOGLE_PRIVATE_KEY?.replace(/\\n/g, '\n')
};

// Foxpost API konfigurÃ¡ciÃ³
const FOXPOST_CONFIG = {
  API_BASE_URL: 'https://webapi.foxpost.hu/api',
  USERNAME: 'ecomm_beller_zoltan_ezra_1425338',
  PASSWORD: 'B3t2X08d5zBf',
  API_KEY: 'kmpLskKYe4WcTeU7kcLr',
  CUSTOMER_CODE: '351807914'
};

// Google Sheets kapcsolat
async function getGoogleSheet(sheetId) {
  const serviceAccountAuth = new JWT({
    email: GOOGLE_SHEETS_CONFIG.SERVICE_ACCOUNT_EMAIL,
    key: GOOGLE_SHEETS_CONFIG.PRIVATE_KEY,
    scopes: ['https://www.googleapis.com/auth/spreadsheets'],
  });

  const doc = new GoogleSpreadsheet(sheetId, serviceAccountAuth);
  await doc.loadInfo();
  return doc.sheetsByIndex[0];
}

// Foxpost API hÃ­vÃ¡s helper
async function foxpostApiCall(endpoint, method = 'GET', data = null) {
  const auth = Buffer.from(`${FOXPOST_CONFIG.USERNAME}:${FOXPOST_CONFIG.PASSWORD}`).toString('base64');
  
  try {
    const config = {
      method,
      url: `${FOXPOST_CONFIG.API_BASE_URL}${endpoint}`,
      headers: {
        'Authorization': `Basic ${auth}`,
        'Api-key': FOXPOST_CONFIG.API_KEY,
        'Content-Type': 'application/json'
      }
    };

    if (data && (method === 'POST' || method === 'PUT')) {
      config.data = data;
    }

    const response = await axios(config);
    return response.data;
  } catch (error) {
    console.error('Foxpost API Error:', {
      endpoint,
      status: error.response?.status,
      data: error.response?.data,
      message: error.message
    });
    throw error;
  }
}

// Foxpost csomag lÃ©trehozÃ¡sa
async function createFoxpostParcel(orderData) {
  const { customerData, cart } = orderData;
  const ebookId = 2;
  const physicalProducts = cart.filter(item => item.id !== ebookId);
  
  if (physicalProducts.length === 0 || customerData.shippingMethod !== 'pickup') {
    return null;
  }

  try {
    const parcelData = [{
      recipientName: customerData.fullName,
      recipientPhone: customerData.phone || '+36301234567',
      recipientEmail: customerData.email,
      destination: customerData.pickupPoint?.operator_id || customerData.pickupPoint?.place_id,
      size: 'M',
      cod: 0,
      comment: `Senkisem rendelÃ©s - ${physicalProducts.map(p => p.name).join(', ')}`,
      refCode: `SENKISEM-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`
    }];

    console.log('Foxpost csomag lÃ©trehozÃ¡sa:', {
      destination: parcelData[0].destination,
      recipient: parcelData[0].recipientName,
      products: physicalProducts.length
    });

    const result = await foxpostApiCall('/parcel?isWeb=false', 'POST', parcelData);
    
    if (result && result.length > 0 && result[0].clFoxId) {
      console.log('Foxpost csomag lÃ©trehozva:', result[0].clFoxId);
      return {
        trackingId: result[0].clFoxId,
        sendCode: result[0].sendCode,
        destination: result[0].destination,
        routeInfo: result[0].routeInfo
      };
    } else {
      console.error('Foxpost csomag lÃ©trehozÃ¡s sikertelen:', result);
      return null;
    }
  } catch (error) {
    console.error('Foxpost API hiba:', error.response?.data || error.message);
    return null;
  }
}

// Foxpost tracking lekÃ©rdezÃ©se
async function getFoxpostTracking(trackingId) {
  try {
    const result = await foxpostApiCall(`/tracking/${trackingId}`);
    return result;
  } catch (error) {
    console.error('Foxpost tracking hiba:', error);
    return null;
  }
}

// EGYSÃ‰GESÃTETT rendelÃ©s mentÃ©se Google Sheets-be
async function saveOrderToSheet(orderData, paymentInfo = {}) {
  try {
    const sheet = await getGoogleSheet(GOOGLE_SHEETS_CONFIG.ORDERS_SHEET_ID);
    
    const productNames = orderData.cart.map(item => item.name).join(', ');
    const productSizes = orderData.cart.map(item => item.size || 'N/A').join(', ');
    const totalAmount = orderData.cart.reduce((sum, item) => sum + item.price, 0);
    
    const isOnlyEbook = orderData.cart.length === 1 && parseInt(orderData.cart[0].id) === 2;
    const orderType = isOnlyEbook ? 'E-kÃ¶nyv' : 'Fizikai termÃ©k';
    
    let shippingMethod = '';
    let shippingAddress = '';
    let pickupPointName = '';
    let foxpostTracking = '';
    let shippingCost = 0;
    
    if (isOnlyEbook) {
      shippingMethod = 'DigitÃ¡lis letÃ¶ltÃ©s';
      shippingAddress = 'E-mail kÃ¼ldÃ©s';
      pickupPointName = 'N/A';
      foxpostTracking = 'N/A';
      shippingCost = 0;
    } else if (orderData.customerData.shippingMethod === 'pickup') {
      shippingMethod = 'Foxpost Csomagpont';
      pickupPointName = orderData.customerData.pickupPoint?.name || 'Csomagpont kivÃ¡lasztva';
      shippingAddress = `${orderData.customerData.pickupPoint?.zip || ''} ${orderData.customerData.pickupPoint?.city || ''}, ${orderData.customerData.pickupPoint?.address || ''}`;
      foxpostTracking = orderData.foxpostTrackingId || '';
      shippingCost = 899;
    } else if (orderData.customerData.shippingMethod === 'home') {
      shippingMethod = 'HÃ¡zhozszÃ¡llÃ­tÃ¡s';
      const deliveryAddr = orderData.customerData.deliveryAddress || orderData.customerData.address;
      const deliveryCity = orderData.customerData.deliveryCity || orderData.customerData.city;
      const deliveryZip = orderData.customerData.deliveryZip || orderData.customerData.zip;
      shippingAddress = `${deliveryZip} ${deliveryCity}, ${deliveryAddr}`;
      shippingCost = 2590;
    } else {
      shippingMethod = 'DigitÃ¡lis letÃ¶ltÃ©s';
      shippingAddress = 'E-mail kÃ¼ldÃ©s';
      pickupPointName = 'N/A';
      foxpostTracking = 'N/A';
      shippingCost = 0;
    }

    await sheet.addRow({
      'DÃ¡tum': new Date().toLocaleString('hu-HU'),
      'NÃ©v': orderData.customerData.fullName,
      'Email': orderData.customerData.email,
      'TelefonszÃ¡m': orderData.customerData.phone || 'Nem adott meg',
      'CÃ­m': `${orderData.customerData.zip || ''} ${orderData.customerData.city || ''}, ${orderData.customerData.address || ''}`,
      'VÃ¡ros': orderData.customerData.city || '',
      'OrszÃ¡g': orderData.customerData.country || 'MagyarorszÃ¡g',
      'IrÃ¡nyÃ­tÃ³szÃ¡m': orderData.customerData.zip || '',
      'TermÃ©kek': productNames,
      'MÃ©retek': productSizes,
      'Ã–sszeg': `${totalAmount.toLocaleString('hu-HU')} Ft`,
      'TÃ­pus': orderType,
      'SzÃ¡llÃ­tÃ¡si mÃ³d': shippingMethod,
      'SzÃ¡llÃ­tÃ¡si cÃ­m': shippingAddress,
      'Csomagpont nÃ©v': pickupPointName,
      'SzÃ¡llÃ­tÃ¡si dÃ­j': `${shippingCost} Ft`,
      'VÃ©gÃ¶sszeg': `${(totalAmount + shippingCost).toLocaleString('hu-HU')} Ft`,
      'Foxpost kÃ¶vetÃ©s': foxpostTracking,
      'RendelÃ©s ID': paymentInfo.paymentIntentId || `ORDER-${Date.now()}`,
      'StÃ¡tusz': paymentInfo.status || 'FizetÃ©s folyamatban',
      'SzÃ¡llÃ­tÃ¡si megjegyzÃ©s': orderData.customerData.deliveryNote || ''
    });

    console.log('RendelÃ©s mentve Google Sheets-be - TÃ­pus:', orderType);
  } catch (error) {
    console.error('Hiba a rendelÃ©s mentÃ©sekor:', error);
  }
}

// Egyedi kreÃ¡ciÃ³ mentÃ©se Google Sheets-be
async function saveCustomDesignToSheet(designData) {
  try {
    const sheet = await getGoogleSheet(GOOGLE_SHEETS_CONFIG.CUSTOM_DESIGNS_SHEET_ID);

    await sheet.addRow({
      'DÃ¡tum': new Date().toLocaleString('hu-HU'),
      'NÃ©v': designData.name,
      'Email': designData.email,
      'Telefon': designData.phone || '',
      'VÃ¡lasz 1': designData['1'] || '',
      'VÃ¡lasz 2': designData['2'] || '',
      'VÃ¡lasz 3': designData['3'] || '',
      'VÃ¡lasz 4': designData['4'] || '',
      'VÃ¡lasz 5': designData['5'] || '',
      'VÃ¡lasz 6': designData['6'] || '',
      'VÃ¡lasz 7': designData['7'] || ''
    });

    console.log('Egyedi kreÃ¡ciÃ³ mentve Google Sheets-be');
  } catch (error) {
    console.error('Hiba az egyedi kreÃ¡ciÃ³ mentÃ©sekor:', error);
  }
}

// TermÃ©kek betÃ¶ltÃ©se
let products = [];
try {
  const data = fs.readFileSync(path.join(__dirname, 'product.json'), 'utf8');
  const productData = JSON.parse(data);
  products = productData.products || productData;
  console.log('TermÃ©kek sikeresen betÃ¶ltve:', products.length, 'db termÃ©k.');
} catch (err) {
  console.error('Hiba a product.json olvasÃ¡sakor:', err.message);
}

// ========================================
// API ROUTES (EZEKNEK ELÅBB KELL JÃ–NNIÃœK!)
// ========================================

// EGYSÃ‰GESÃTETT Stripe fizetÃ©si session - DINAMIKUS SUCCESS URL
app.post('/create-payment-session', async (req, res) => {

  console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
  console.log('ğŸ” TELJES REQUEST BODY:');
  console.log(JSON.stringify(req.body, null, 2));
  console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
  console.log('ğŸ“ TELEFONSZÃM Ã‰RTÃ‰K:');
  console.log('customerData.phone:', req.body.customerData?.phone);
  console.log('Type:', typeof req.body.customerData?.phone);
  console.log('Length:', req.body.customerData?.phone?.length);
  console.log('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');

  console.log('FizetÃ©si kÃ©rÃ©s Ã©rkezett:', {
    cartItems: req.body.cart?.length,
    shippingMethod: req.body.customerData?.shippingMethod,
    pickupPoint: req.body.customerData?.pickupPoint?.name,
    orderType: req.body.cart?.length === 1 && parseInt(req.body.cart[0].id) === 2 ? 'E-kÃ¶nyv' : 'Fizikai termÃ©k'
  });

  const { cart, customerData } = req.body;

  if (!Array.isArray(cart) || cart.length === 0) {
    return res.status(400).json({ error: 'Ãœres vagy Ã©rvÃ©nytelen kosÃ¡r.' });
  }

  if (!customerData) {
    return res.status(400).json({ error: 'HiÃ¡nyzÃ³ vÃ¡sÃ¡rlÃ³i adatok.' });
  }

  try {
    // Determine if this is an e-book only order
    const isOnlyEbook = cart.length === 1 && parseInt(cart[0].id) === 2;
    const hasPhysicalProducts = cart.some(item => parseInt(item.id) !== 2);

    // Foxpost csomag lÃ©trehozÃ¡sa (csak fizikai termÃ©kekhez)
    let foxpostResult = null;
    if (!isOnlyEbook && customerData.shippingMethod === 'pickup' && customerData.pickupPoint) {
      console.log('Foxpost csomag lÃ©trehozÃ¡sa...');
      foxpostResult = await createFoxpostParcel({ cart, customerData });
      if (foxpostResult) {
        console.log('Foxpost csomag lÃ©trehozva:', foxpostResult.trackingId);
      }
    }

    // Stripe line items lÃ©trehozÃ¡sa
    const lineItems = cart.map(item => {
      const itemIdAsNumber = parseInt(item.id);
      const officialProduct = products.find(p => p.id === itemIdAsNumber);
      
      if (!officialProduct) {
        console.error(`TermÃ©k nem talÃ¡lhatÃ³: ${item.name} (ID: ${item.id})`);
        throw new Error(`TermÃ©k nem talÃ¡lhatÃ³: ${item.name || `ID: ${item.id}`}`);
      }
      
      return {
        price_data: {
          currency: 'huf',
          product_data: { 
            name: officialProduct.name,
            metadata: {
              size: item.size || 'N/A'
            }
          },
          unit_amount: officialProduct.price * 100,
        },
        quantity: 1,
      };
    });

    // SzÃ¡llÃ­tÃ¡si dÃ­j hozzÃ¡adÃ¡sa (csak fizikai termÃ©kekhez)
    if (!isOnlyEbook && hasPhysicalProducts) {
      if (customerData.shippingMethod === 'pickup') {
        lineItems.push({
          price_data: {
            currency: 'huf',
            product_data: { 
              name: 'Foxpost Csomagpont',
              description: `Csomagpont: ${customerData.pickupPoint?.name || 'KivÃ¡lasztott csomagpont'}`
            },
            unit_amount: 899 * 100,
          },
          quantity: 1,
        });
      } else if (customerData.shippingMethod === 'home') {
        lineItems.push({
          price_data: {
            currency: 'huf',
            product_data: { 
              name: 'HÃ¡zhozszÃ¡llÃ­tÃ¡s',
              description: `SzÃ¡llÃ­tÃ¡s: ${customerData.deliveryAddress || customerData.address}`
            },
            unit_amount: 2590 * 100,
          },
          quantity: 1,
        });
      }
    }

    // RendelÃ©s adatok mentÃ©se
    const orderDataWithFoxpost = {
      cart,
      customerData,
      foxpostTrackingId: foxpostResult?.trackingId,
      foxpostSendCode: foxpostResult?.sendCode
    };

    await saveOrderToSheet(orderDataWithFoxpost);

    // DINAMIKUS SUCCESS URL VÃLASZTÃS
    const successUrl = isOnlyEbook 
      ? `${process.env.DOMAIN}/success2.html?session_id={CHECKOUT_SESSION_ID}`
      : `${process.env.DOMAIN}/success.html?session_id={CHECKOUT_SESSION_ID}`;

    // Stripe session lÃ©trehozÃ¡sa
    const session = await stripe.checkout.sessions.create({
      payment_method_types: ['card'],
      mode: 'payment',
      line_items: lineItems,
      success_url: successUrl,
      cancel_url: `${process.env.DOMAIN}/cancel.html`,
      metadata: {
        customerName: customerData.fullName,
        customerEmail: customerData.email,
        shippingMethod: customerData.shippingMethod || 'digital',
        foxpostTrackingId: foxpostResult?.trackingId || '',
        orderType: isOnlyEbook ? 'ebook' : 'physical'
      },
      customer_email: customerData.email,
    });

    console.log('Stripe session lÃ©trehozva:', session.id);
    console.log('RendelÃ©s tÃ­pus:', isOnlyEbook ? 'E-kÃ¶nyv' : 'Fizikai termÃ©k');
    console.log('Success URL:', successUrl);
    
    res.json({ 
      payment_url: session.url,
      foxpostTrackingId: foxpostResult?.trackingId 
    });

  } catch (error) {
    console.error('Hiba a session lÃ©trehozÃ¡sakor:', error.message);
    res.status(500).json({ error: error.message });
  }
});

// Egyedi kreÃ¡ciÃ³ mentÃ©se
app.post('/save-custom-design', async (req, res) => {
  console.log('Egyedi kreÃ¡ciÃ³ Ã©rkezett:', req.body.email);

  try {
    await saveCustomDesignToSheet(req.body);
    res.json({ success: true, message: 'Egyedi kreÃ¡ciÃ³ sikeresen mentve!' });
  } catch (error) {
    console.error('Hiba az egyedi kreÃ¡ciÃ³ mentÃ©sekor:', error);
    res.status(500).json({ error: 'Hiba tÃ¶rtÃ©nt a mentÃ©s sorÃ¡n.' });
  }
});

// Foxpost kÃ¶vetÃ©si informÃ¡ciÃ³k lekÃ©rdezÃ©se
app.get('/foxpost/tracking/:trackingId', async (req, res) => {
  try {
    const trackingData = await getFoxpostTracking(req.params.trackingId);
    if (trackingData) {
      res.json(trackingData);
    } else {
      res.status(404).json({ error: 'KÃ¶vetÃ©si informÃ¡ciÃ³ nem talÃ¡lhatÃ³' });
    }
  } catch (error) {
    console.error('Foxpost tracking API hiba:', error);
    res.status(500).json({ error: 'Hiba a kÃ¶vetÃ©si informÃ¡ciÃ³ lekÃ©rdezÃ©sekor' });
  }
});

// Foxpost csomagpontok lekÃ©rdezÃ©se
app.get('/foxpost/pickup-points', async (req, res) => {
  try {
    const response = await axios.get('https://cdn.foxpost.hu/foxplus.json');
    const points = response.data.filter(point => 
      point.country === 'HU' && 
      point.name && 
      point.address
    );
    
    res.json(points);
  } catch (error) {
    console.error('Foxpost csomagpontok lekÃ©rdezÃ©si hiba:', error);
    res.status(500).json({ error: 'Hiba a csomagpontok lekÃ©rdezÃ©sekor' });
  }
});

// Foxpost csomagpontok keresÃ©se
app.get('/foxpost/search-pickup-points', async (req, res) => {
  try {
    const { query, zip, city } = req.query;
    const response = await axios.get('https://cdn.foxpost.hu/foxplus.json');
    let points = response.data.filter(point => 
      point.country === 'HU' && 
      point.name && 
      point.address
    );
    
    if (query) {
      const searchTerm = query.toLowerCase();
      points = points.filter(point => {
        const searchText = `${point.name} ${point.address} ${point.city} ${point.zip}`.toLowerCase();
        return searchText.includes(searchTerm);
      });
    }
    
    if (zip) {
      points = points.filter(point => point.zip === zip);
    }
    
    if (city) {
      points = points.filter(point => 
        point.city.toLowerCase().includes(city.toLowerCase())
      );
    }
    
    points = points.slice(0, 50);
    
    res.json(points);
  } catch (error) {
    console.error('Foxpost keresÃ©si hiba:', error);
    res.status(500).json({ error: 'Hiba a keresÃ©s sorÃ¡n' });
  }
});

// Webhook a Stripe esemÃ©nyekhez
app.post('/webhook/stripe', express.raw({type: 'application/json'}), async (req, res) => {
  const sig = req.headers['stripe-signature'];
  let event;

  try {
    event = stripe.webhooks.constructEvent(req.body, sig, process.env.STRIPE_WEBHOOK_SECRET);
  } catch (err) {
    console.error('Webhook signature verification failed:', err.message);
    return res.status(400).send(`Webhook Error: ${err.message}`);
  }

  try {
    switch (event.type) {
      case 'checkout.session.completed':
        const session = event.data.object;
        console.log('FizetÃ©s sikeresen befejezve:', session.id);
        
        if (session.metadata.foxpostTrackingId) {
          console.log('Foxpost kÃ¶vetÃ©si szÃ¡m:', session.metadata.foxpostTrackingId);
        }
        break;
        
      case 'payment_intent.succeeded':
        const paymentIntent = event.data.object;
        console.log('FizetÃ©s sikeres:', paymentIntent.id);
        break;
        
      default:
        console.log(`Feldolgozatlan esemÃ©ny tÃ­pus: ${event.type}`);
    }
  } catch (error) {
    console.error('Webhook feldolgozÃ¡si hiba:', error);
    return res.status(500).send('Webhook handler failed');
  }

  res.json({received: true});
});

// Health check
app.get('/health', (req, res) => {
  res.json({ 
    status: 'OK', 
    timestamp: new Date().toISOString(),
    services: {
      foxpost: 'connected',
      stripe: 'connected',
      googleSheets: 'connected'
    }
  });
});

// ========================================
// STATIKUS FÃJLOK SZOLGÃLTATÃSA
// ========================================

// 1. Public mappa statikus fÃ¡jljai (kÃ©pek, videÃ³k, egyÃ©b assets)
app.use('/assets', express.static(path.join(__dirname, 'public/assets')));
app.use('/img', express.static(path.join(__dirname, 'public/img')));

// 2. Build-elt React alkalmazÃ¡s (dist mappa)
app.use(express.static(path.join(__dirname, 'dist')));

// 3. SPA routing - MINDEN mÃ¡s Ãºtvonal â†’ React app index.html
// Ez biztosÃ­tja, hogy a React Router mÅ±kÃ¶djÃ¶n
app.get('*', (req, res) => {
  res.sendFile(path.join(__dirname, 'dist', 'index.html'));
});

// ========================================
// SZERVER INDÃTÃSA
// ========================================

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          ğŸš€ SENKISEM SZERVER ELINDULT             â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Port:                ${PORT}                      â•‘
â•‘  URL:                 http://localhost:${PORT}     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  âœ… Foxpost integrÃ¡ciÃ³:        AktÃ­v              â•‘
â•‘  âœ… Stripe integrÃ¡ciÃ³:         AktÃ­v              â•‘
â•‘  âœ… Google Sheets integrÃ¡ciÃ³:  AktÃ­v              â•‘
â•‘  âœ… React SPA:                 AktÃ­v              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸ“¦ E-kÃ¶nyv rendelÃ©sek:        TÃ¡mogatott         â•‘
â•‘  ğŸ“¦ Fizikai termÃ©k rendelÃ©sek: TÃ¡mogatott         â•‘
â•‘  ğŸ“ Foxpost csomagpont:        TÃ¡mogatott         â•‘
â•‘  ğŸ  HÃ¡zhozszÃ¡llÃ­tÃ¡s:           TÃ¡mogatott         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸ¯ Success URL routing:                          â•‘
â•‘     â€¢ Fizikai:  /success.html                     â•‘
â•‘     â€¢ E-kÃ¶nyv:  /success2.html                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  `);
});